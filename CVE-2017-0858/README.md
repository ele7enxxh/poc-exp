mediacodec-decoder CVE-2017-0858.h264

```
08-18 06:15:41.233 23256 11747 I         : =================================================================
08-18 06:15:41.233 23256 11747 I         : 
08-18 06:15:41.236 23256 11747 I         : 
08-18 06:15:41.237 23256 11747 I         : ==23256==ERROR: AddressSanitizer: SEGV on unknown address 0x00000000 (pc 0xf3030a88 bp 0x00000000 sp 0xf26ff6b8 T6)
08-18 06:15:41.237 23256 11747 I         : 
08-18 06:15:41.237 23256 11747 I         : 
08-18 06:15:41.461 23256 11747 I         :     #0 0xf3030a87  /proc/self/cwd/ih264_inter_pred_chroma_a9q.s:142
08-18 06:15:41.461 23256 11747 I         : 
08-18 06:15:41.469 23256 11747 I         :     #1 0xf5ee4a93  (/system/lib/libclang_rt.asan-arm-android.so+0x77a93)
08-18 06:15:41.469 23256 11747 I         : 
08-18 06:15:41.479 23256 11747 I         :     #2 0xf67840bb  (/data/lib/libc.so+0x170bb)
08-18 06:15:41.480 23256 11747 I         : 
08-18 06:15:41.480 23256 11747 I         : 
08-18 06:15:41.480 23256 11747 I         : 
08-18 06:15:41.480 23256 11747 I         : AddressSanitizer can not provide additional info.
08-18 06:15:41.480 23256 11747 I         : 
08-18 06:15:41.481 23256 11747 I         : SUMMARY: AddressSanitizer: SEGV /proc/self/cwd/ih264_inter_pred_chroma_a9q.s:142 
08-18 06:15:41.481 23256 11747 I         : 
08-18 06:15:41.481 23256 11747 I         : Thread T6 created by T2 (le.h264.decoder) here:
08-18 06:15:41.481 23256 11747 I         : 
08-18 06:15:41.481 23256 11747 I         :     #0 0xf5ec94db in pthread_create (/system/lib/libclang_rt.asan-arm-android.so+0x5c4db)
08-18 06:15:41.481 23256 11747 I         : 
08-18 06:15:41.484 23256 11747 I         :     #1 0xf309ce8f in ih264d_parse_decode_slice /proc/self/cwd/external/libavc/decoder/ih264d_parse_slice.c:1541:17
08-18 06:15:41.485 23256 11747 I         : 
08-18 06:15:41.488 23256 11747 I         :     #2 0xf3020e0b in ih264d_video_decode /proc/self/cwd/external/libavc/decoder/ih264d_api.c:2085:15
08-18 06:15:41.488 23256 11747 I         : 
08-18 06:15:41.489 23256 11747 I         :     #3 0xf302a4e3 in ih264d_api_function /proc/self/cwd/external/libavc/decoder/ih264d_api.c:3706:26
08-18 06:15:41.489 23256 11747 I         : 
08-18 06:15:41.493 23256 11747 I         :     #4 0xf30177df in android::SoftAVC::onQueueFilled(unsigned int) /proc/self/cwd/frameworks/av/media/libstagefright/codecs/avcdec/SoftAVCDec.cpp:629:22
08-18 06:15:41.493 23256 11747 I         : 
08-18 06:15:41.496 23256 11747 I         :     #5 0xf68708df in android::SimpleSoftOMXComponent::onMessageReceived(android::sp<android::AMessage> const&) (/data/lib/libstagefright_omx.so+0x518df)
08-18 06:15:41.496 23256 11747 I         : 
08-18 06:15:41.497 23256 11747 I         :     #6 0xf687537f  (/data/lib/libstagefright_omx.so+0x5637f)
08-18 06:15:41.497 23256 11747 I         : 
08-18 06:15:41.499 23256 11747 I         :     #7 0xf57ddf73 in android::AHandler::deliverMessage(android::sp<android::AMessage> const&) (/data/lib/libstagefright_foundation.so+0x12f73)
08-18 06:15:41.499 23256 11747 I         : 
08-18 06:15:41.500 23256 11747 I         :     #8 0xf57ea8a7 in android::AMessage::deliver() (/data/lib/libstagefright_foundation.so+0x1f8a7)
08-18 06:15:41.500 23256 11747 I         : 
08-18 06:15:41.500 23256 11747 I         :     #9 0xf57e1853 in android::ALooper::loop() (/data/lib/libstagefright_foundation.so+0x16853)
08-18 06:15:41.500 23256 11747 I         : 
08-18 06:15:41.502 23256 11747 I         :     #10 0xf584813f in android::Thread::_threadLoop(void*) (/data/lib/libutils.so+0x1b13f)
08-18 06:15:41.502 23256 11747 I         : 
08-18 06:15:41.503 23256 11747 I         :     #11 0xf67b4093 in __pthread_start(void*) (/data/lib/libc.so+0x47093)
08-18 06:15:41.503 23256 11747 I         : 
08-18 06:15:41.503 23256 11747 I         : 
08-18 06:15:41.503 23256 11747 I         : 
08-18 06:15:41.503 23256 11747 I         : Thread T2 (le.h264.decoder) created by T1 (Binder:23256_1) here:
08-18 06:15:41.503 23256 11747 I         : 
08-18 06:15:41.503 23256 11747 I         :     #0 0xf5ec94db in pthread_create (/system/lib/libclang_rt.asan-arm-android.so+0x5c4db)
08-18 06:15:41.503 23256 11747 I         : 
08-18 06:15:41.503 23256 11747 I         :     #1 0xf584687f in androidCreateRawThreadEtc (/data/lib/libutils.so+0x1987f)
08-18 06:15:41.503 23256 11747 I         : 
08-18 06:15:41.503 23256 11747 I         :     #2 0xf584795b in android::Thread::run(char const*, int, unsigned int) (/data/lib/libutils.so+0x1a95b)
08-18 06:15:41.503 23256 11747 I         : 
08-18 06:15:41.504 23256 11747 I         :     #3 0xf57e11f3 in android::ALooper::start(bool, bool, int) (/data/lib/libstagefright_foundation.so+0x161f3)
08-18 06:15:41.504 23256 11747 I         : 
08-18 06:15:41.504 23256 11747 I         :     #4 0xf686d1af in android::SimpleSoftOMXComponent::SimpleSoftOMXComponent(char const*, OMX_CALLBACKTYPE const*, void*, OMX_COMPONENTTYPE**) (/data/lib/libstagefright_omx.so+0x4e1af)
08-18 06:15:41.504 23256 11747 I         : 
08-18 06:15:41.504 23256 11747 I         :     #5 0xf6877013 in android::SoftVideoDecoderOMXComponent::SoftVideoDecoderOMXComponent(char const*, char const*, OMX_VIDEO_CODINGTYPE, android::CodecProfileLevel const*, unsigned int, int, int, OMX_CALLBACKTYPE const*, void*, OMX_COMPONENTTYPE**) (/data/lib/libstagefright_omx.so+0x58013)
08-18 06:15:41.504 23256 11747 I         : 
08-18 06:15:41.506 23256 11747 I         :     #6 0xf301974f in android::SoftAVC::SoftAVC(char const*, OMX_CALLBACKTYPE const*, void*, OMX_COMPONENTTYPE**) /proc/self/cwd/frameworks/av/media/libstagefright/codecs/avcdec/SoftAVCDec.cpp:112:7
08-18 06:15:41.506 23256 11747 I         : 
08-18 06:15:41.506 23256 11747 I         :     #7 0xf301974f in createSoftOMXComponent(char const*, OMX_CALLBACKTYPE const*, void*, OMX_COMPONENTTYPE**) /proc/self/cwd/frameworks/av/media/libstagefright/codecs/avcdec/SoftAVCDec.cpp:768
08-18 06:15:41.506 23256 11747 I         : 
08-18 06:15:41.506 23256 11747 I         :     #8 0xf68767ff in android::SoftOMXPlugin::makeComponentInstance(char const*, OMX_CALLBACKTYPE const*, void*, OMX_COMPONENTTYPE**) (/data/lib/libstagefright_omx.so+0x577ff)
08-18 06:15:41.506 23256 11747 I         : 
08-18 06:15:41.506 23256 11747 I         :     #9 0xf68501f3 in android::OMXMaster::makeComponentInstance(char const*, OMX_CALLBACKTYPE const*, void*, OMX_COMPONENTTYPE**) (/data/lib/libstagefright_omx.so+0x311f3)
08-18 06:15:41.506 23256 11747 I         : 
08-18 06:15:41.506 23256 11747 I         :     #10 0xf6845ceb in android::OMX::allocateNode(char const*, android::sp<android::IOMXObserver> const&, android::sp<android::IBinder>*, unsigned int*) (/data/lib/libstagefright_omx.so+0x26ceb)
08-18 06:15:41.507 23256 11747 I         : 
08-18 06:15:41.516 23256 11747 I         :     #11 0xf5b095fb in android::BnOMX::onTransact(unsigned int, android::Parcel const&, android::Parcel*, unsigned int) (/data/lib/libmedia.so+0x1485fb)
08-18 06:15:41.516 23256 11747 I         : 
08-18 06:15:41.521 23256 11747 I         :     #12 0xf5be1913 in android::BBinder::transact(unsigned int, android::Parcel const&, android::Parcel*, unsigned int) (/data/lib/libbinder.so+0x32913)
08-18 06:15:41.521 23256 11747 I         : 
08-18 06:15:41.521 23256 11747 I         :     #13 0xf5c03bcf in android::IPCThreadState::executeCommand(int) (/data/lib/libbinder.so+0x54bcf)
08-18 06:15:41.521 23256 11747 I         : 
08-18 06:15:41.521 23256 11747 I         :     #14 0xf5c03107 in android::IPCThreadState::getAndExecuteCommand() (/data/lib/libbinder.so+0x54107)
08-18 06:15:41.521 23256 11747 I         : 
08-18 06:15:41.522 23256 11747 I         :     #15 0xf5c0455b in android::IPCThreadState::joinThreadPool(bool) (/data/lib/libbinder.so+0x5555b)
08-18 06:15:41.522 23256 11747 I         : 
08-18 06:15:41.522 23256 11747 I         :     #16 0xf5c6869f  (/data/lib/libbinder.so+0xb969f)
08-18 06:15:41.522 23256 11747 I         : 
08-18 06:15:41.522 23256 11747 I         :     #17 0xf5847f37 in android::Thread::_threadLoop(void*) (/data/lib/libutils.so+0x1af37)
08-18 06:15:41.522 23256 11747 I         : 
08-18 06:15:41.522 23256 11747 I         :     #18 0xf67b4093 in __pthread_start(void*) (/data/lib/libc.so+0x47093)
08-18 06:15:41.522 23256 11747 I         : 
08-18 06:15:41.522 23256 11747 I         : 
08-18 06:15:41.522 23256 11747 I         : 
08-18 06:15:41.522 23256 11747 I         : Thread T1 (Binder:23256_1) created by T0 here:
08-18 06:15:41.522 23256 11747 I         : 
08-18 06:15:41.522 23256 11747 I         :     #0 0xf5ec94db in pthread_create (/system/lib/libclang_rt.asan-arm-android.so+0x5c4db)
08-18 06:15:41.522 23256 11747 I         : 
08-18 06:15:41.523 23256 11747 I         :     #1 0xf584687f in androidCreateRawThreadEtc (/data/lib/libutils.so+0x1987f)
08-18 06:15:41.523 23256 11747 I         : 
08-18 06:15:41.523 23256 11747 I         :     #2 0xf5847933 in android::Thread::run(char const*, int, unsigned int) (/data/lib/libutils.so+0x1a933)
08-18 06:15:41.523 23256 11747 I         : 
08-18 06:15:41.523 23256 11747 I         :     #3 0xf5c66167 in android::ProcessState::spawnPooledThread(bool) (/data/lib/libbinder.so+0xb7167)
08-18 06:15:41.523 23256 11747 I         : 
08-18 06:15:41.523 23256 11747 I         :     #4 0xf5c65ef7 in android::ProcessState::startThreadPool() (/data/lib/libbinder.so+0xb6ef7)
08-18 06:15:41.523 23256 11747 I         : 
08-18 06:15:41.524 23256 11747 I         :     #5 0xb077214b in __libc_init (/system/bin/mediacodec+0x114b)
08-18 06:15:41.524 23256 11747 I         : 
08-18 06:15:41.524 23256 11747 I         :     #6 0xf6783c61 in __libc_init (/data/lib/libc.so+0x16c61)
08-18 06:15:41.524 23256 11747 I         : 
08-18 06:15:41.525 23256 11747 I         :     #7 0xffffffff  (<unknown module>)
08-18 06:15:41.525 23256 11747 I         : 
08-18 06:15:41.525 23256 11747 I         : 
08-18 06:15:41.525 23256 11747 I         : 
08-18 06:15:41.525 23256 11747 I         : ==23256==ABORTING
```
